<?php

declare (strict_types=1);
namespace PHPStan\Type;

use PHPStan\Broker\Broker;
use PHPStan\Type\Accessory\AccessoryNumericStringType;
use PHPStan\Type\Accessory\HasMethodType;
use PHPStan\Type\Accessory\HasOffsetType;
use PHPStan\Type\Accessory\HasPropertyType;
use PHPStan\Type\Accessory\NonEmptyArrayType;
use PHPStan\Type\Constant\ConstantArrayType;
use PHPStan\Type\Constant\ConstantBooleanType;
use PHPStan\Type\Constant\ConstantFloatType;
use PHPStan\Type\Constant\ConstantIntegerType;
use PHPStan\Type\Constant\ConstantStringType;
use PHPStan\Type\Generic\GenericClassStringType;
use PHPStan\Type\Generic\GenericObjectType;
use PHPStan\Type\Generic\TemplateObjectType;
use PHPStan\Type\Generic\TemplateObjectWithoutClassType;
use PHPStan\Type\Generic\TemplateType;
use PHPStan\Type\Generic\TemplateTypeFactory;
use PHPStan\Type\Generic\TemplateTypeScope;
use PHPStan\Type\Generic\TemplateTypeVariance;
class TypeCombinatorTest extends \PHPStan\Testing\TestCase
{
    public function dataAddNull() : array
    {
        return [[new \PHPStan\Type\MixedType(), \PHPStan\Type\MixedType::class, 'mixed'], [new \PHPStan\Type\NullType(), \PHPStan\Type\NullType::class, 'null'], [new \PHPStan\Type\VoidType(), \PHPStan\Type\UnionType::class, 'void|null'], [new \PHPStan\Type\StringType(), \PHPStan\Type\UnionType::class, 'string|null'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), \PHPStan\Type\UnionType::class, 'int|string|null'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\NullType()]), \PHPStan\Type\UnionType::class, 'int|string|null'], [new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('ArrayObject')]), \PHPStan\Type\UnionType::class, '(ArrayObject&iterable<string>)|null'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\NullType()]), \PHPStan\Type\UnionType::class, '(ArrayObject&iterable<string>)|null']];
    }
    /**
     * @dataProvider dataAddNull
     * @param \PHPStan\Type\Type $type
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testAddNull(\PHPStan\Type\Type $type, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $result = \PHPStan\Type\TypeCombinator::addNull($type);
        $this->assertSame($expectedTypeDescription, $result->describe(\PHPStan\Type\VerbosityLevel::precise()));
        $this->assertInstanceOf($expectedTypeClass, $result);
    }
    /**
     * @dataProvider dataAddNull
     * @param \PHPStan\Type\Type $type
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testUnionWithNull(\PHPStan\Type\Type $type, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $result = \PHPStan\Type\TypeCombinator::union($type, new \PHPStan\Type\NullType());
        $this->assertSame($expectedTypeDescription, $result->describe(\PHPStan\Type\VerbosityLevel::precise()));
        $this->assertInstanceOf($expectedTypeClass, $result);
    }
    public function dataRemoveNull() : array
    {
        $reflectionProvider = \PHPStan\Broker\Broker::getInstance();
        return [[new \PHPStan\Type\MixedType(), \PHPStan\Type\MixedType::class, 'mixed'], [new \PHPStan\Type\NullType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\VoidType(), \PHPStan\Type\VoidType::class, 'void'], [new \PHPStan\Type\StringType(), \PHPStan\Type\StringType::class, 'string'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\NullType()]), \PHPStan\Type\UnionType::class, 'int|string'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), \PHPStan\Type\UnionType::class, 'int|string'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\NullType()]), \PHPStan\Type\IntersectionType::class, 'ArrayObject&iterable<string>'], [new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('ArrayObject')]), \PHPStan\Type\IntersectionType::class, 'ArrayObject&iterable<string>'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\ThisType($reflectionProvider->getClass(\Exception::class)), new \PHPStan\Type\NullType()]), \PHPStan\Type\ThisType::class, '$this(Exception)'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\ThisType(\Exception::class), new \PHPStan\Type\NullType()]), \PHPStan\Type\ThisType::class, '$this(Exception)'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\NullType()]), \PHPStan\Type\IterableType::class, 'iterable<string>']];
    }
    /**
     * @dataProvider dataRemoveNull
     * @param \PHPStan\Type\Type $type
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testRemoveNull(\PHPStan\Type\Type $type, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $result = \PHPStan\Type\TypeCombinator::removeNull($type);
        $this->assertSame($expectedTypeDescription, $result->describe(\PHPStan\Type\VerbosityLevel::precise()));
        $this->assertInstanceOf($expectedTypeClass, $result);
    }
    public function dataUnion() : array
    {
        return [[[new \PHPStan\Type\StringType(), new \PHPStan\Type\NullType()], \PHPStan\Type\UnionType::class, 'string|null'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\Constant\ConstantBooleanType(\false)], \PHPStan\Type\BooleanType::class, 'bool'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()], \PHPStan\Type\UnionType::class, 'int|string'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\StringType()], \PHPStan\Type\UnionType::class, 'int|string'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantBooleanType(\true)], \PHPStan\Type\UnionType::class, 'int|string|true'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\NullType()], \PHPStan\Type\UnionType::class, 'int|string|null'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\NullType()]), new \PHPStan\Type\NullType()], \PHPStan\Type\UnionType::class, 'int|string|null'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\StringType()], \PHPStan\Type\UnionType::class, 'int|string'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\StringType()], \PHPStan\Type\UnionType::class, '(ArrayObject&iterable<int>)|string'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\UnionType::class, 'array<string>|(ArrayObject&iterable<int>)'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\UnionType::class, 'array<string>|int|true'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\ObjectType('Foo')), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\ObjectType('Bar'))]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\ArrayType::class, 'array'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\IterableType::class, 'iterable'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<string>'], [[new \PHPStan\Type\ObjectType('ArrayObject'), new \PHPStan\Type\ObjectType('ArrayIterator'), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\UnionType::class, 'array<string>|ArrayIterator|ArrayObject'], [[new \PHPStan\Type\ObjectType('ArrayObject'), new \PHPStan\Type\ObjectType('ArrayIterator'), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType())], \PHPStan\Type\UnionType::class, 'array<int|string>|ArrayIterator|ArrayObject'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType())], \PHPStan\Type\UnionType::class, 'array<int>|(ArrayObject&iterable<int>)'], [[new \PHPStan\Type\ObjectType('UnknownClass'), new \PHPStan\Type\ObjectType('UnknownClass')], \PHPStan\Type\ObjectType::class, 'UnknownClass'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectType('DateTimeInterface'), new \PHPStan\Type\ObjectType('Traversable')]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectType('DateTimeInterface'), new \PHPStan\Type\ObjectType('Traversable')])], \PHPStan\Type\IntersectionType::class, 'DateTimeInterface&Traversable'], [[new \PHPStan\Type\ObjectType('UnknownClass'), new \PHPStan\Type\ObjectType('UnknownClass')], \PHPStan\Type\ObjectType::class, 'UnknownClass'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\NeverType()], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectType('ArrayObject'), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())]), new \PHPStan\Type\NeverType()], \PHPStan\Type\IntersectionType::class, 'ArrayObject&iterable<string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable<int|string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable<int|string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable<int|string, int|string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<int|string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<int|string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<int|string, int|string>'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\NullType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\NullType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType('Unknown'), new \PHPStan\Type\NullType()])], \PHPStan\Type\UnionType::class, 'string|Unknown|null'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\RecursionCallable\Foo::class), new \PHPStan\Type\CallableType()], \PHPStan\Type\UnionType::class, '_PhpScoper26e51eeacccf\\(callable(): mixed)|RecursionCallable\\Foo'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\Constant\ConstantIntegerType(1)], \PHPStan\Type\IntegerType::class, 'int'], [[new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\Constant\ConstantIntegerType(1)], \PHPStan\Type\Constant\ConstantIntegerType::class, '1'], [[new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\Constant\ConstantIntegerType(2)], \PHPStan\Type\UnionType::class, '1|2'], [[new \PHPStan\Type\FloatType(), new \PHPStan\Type\Constant\ConstantFloatType(1.0)], \PHPStan\Type\FloatType::class, 'float'], [[new \PHPStan\Type\Constant\ConstantFloatType(1.0), new \PHPStan\Type\Constant\ConstantFloatType(1.0)], \PHPStan\Type\Constant\ConstantFloatType::class, '1.0'], [[new \PHPStan\Type\Constant\ConstantFloatType(1.0), new \PHPStan\Type\Constant\ConstantFloatType(2.0)], \PHPStan\Type\UnionType::class, '1.0|2.0'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\Constant\ConstantStringType('A')], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\Constant\ConstantStringType('A'), new \PHPStan\Type\Constant\ConstantStringType('A')], \PHPStan\Type\Constant\ConstantStringType::class, '\'A\''], [[new \PHPStan\Type\Constant\ConstantStringType('A'), new \PHPStan\Type\Constant\ConstantStringType('B')], \PHPStan\Type\UnionType::class, '\'A\'|\'B\''], [[new \PHPStan\Type\BooleanType(), new \PHPStan\Type\Constant\ConstantBooleanType(\true)], \PHPStan\Type\BooleanType::class, 'bool'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\Constant\ConstantBooleanType(\true)], \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\false), new \PHPStan\Type\Constant\ConstantBooleanType(\false)], \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\Constant\ConstantBooleanType(\false)], \PHPStan\Type\BooleanType::class, 'bool'], [[new \PHPStan\Type\ObjectType(\Closure::class), new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false)], \PHPStan\Type\ObjectType::class, 'Closure'], [[new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false), new \PHPStan\Type\CallableType()], \PHPStan\Type\CallableType::class, 'callable(): mixed'], [
            // same keys - can remain ConstantArrayType
            [new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar')], [new \PHPStan\Type\ObjectType(\DateTimeImmutable::class), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar')], [new \PHPStan\Type\NullType(), new \PHPStan\Type\StringType()])],
            \PHPStan\Type\Constant\ConstantArrayType::class,
            'array(\'foo\' => DateTimeImmutable|null, \'bar\' => int|string)',
        ], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar')], [new \PHPStan\Type\ObjectType(\DateTimeImmutable::class), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo')], [new \PHPStan\Type\NullType()])], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'foo\' => DateTimeImmutable|null, ?\'bar\' => int)'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar')], [new \PHPStan\Type\ObjectType(\DateTimeImmutable::class), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar'), new \PHPStan\Type\Constant\ConstantStringType('baz')], [new \PHPStan\Type\NullType(), new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()])], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'foo\' => DateTimeImmutable|null, \'bar\' => int|string, ?\'baz\' => int)'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\ObjectType(\stdClass::class)), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar')], [new \PHPStan\Type\ObjectType(\DateTimeImmutable::class), new \PHPStan\Type\IntegerType()])], \PHPStan\Type\ArrayType::class, 'array<\'bar\'|\'foo\'|int, DateTimeImmutable|int|stdClass>'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<string>'], [[new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<string>'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType(), new \PHPStan\Type\FloatType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\FloatType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\FloatType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('bar'), new \PHPStan\Type\Constant\ConstantStringType('baz'), new \PHPStan\Type\Constant\ConstantStringType('lorem')], \PHPStan\Type\UnionType::class, "'bar'|'baz'|'foo'|'lorem'"], [[new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\Constant\ConstantStringType('fooo'), new \PHPStan\Type\Constant\ConstantStringType('bar'), new \PHPStan\Type\Constant\ConstantStringType('barr'), new \PHPStan\Type\Constant\ConstantStringType('baz'), new \PHPStan\Type\Constant\ConstantStringType('bazz'), new \PHPStan\Type\Constant\ConstantStringType('lorem'), new \PHPStan\Type\Constant\ConstantStringType('loremm'), new \PHPStan\Type\Constant\ConstantStringType('loremmm')], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType())]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType())])], \PHPStan\Type\IntersectionType::class, 'array<string>&hasOffset(string)'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasPropertyType('foo')]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasPropertyType('foo')])], \PHPStan\Type\IntersectionType::class, 'object&hasProperty(foo)'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0), new \PHPStan\Type\Constant\ConstantIntegerType(1)], [new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\CallableType()]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0), new \PHPStan\Type\Constant\ConstantIntegerType(1)], [new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\CallableType()])], \PHPStan\Type\IntersectionType::class, 'array(object, \'foo\')&callable(): mixed'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\NonEmptyArrayType()]), new \PHPStan\Type\Constant\ConstantArrayType([], [])], \PHPStan\Type\ArrayType::class, 'array'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo'))]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\ArrayType::class, 'array'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo'))]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('bar'))])], \PHPStan\Type\ArrayType::class, 'array'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo'))]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo')), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('bar'))])], \PHPStan\Type\IntersectionType::class, 'array&hasOffset(\'foo\')'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType())], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]))], \PHPStan\Type\MixedType::class, 'mixed~int=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\StringType()]))], \PHPStan\Type\MixedType::class, 'mixed~1=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\Constant\ConstantIntegerType(2)), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\StringType()]))], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\Constant\ConstantIntegerType(1))], \PHPStan\Type\MixedType::class, 'mixed~1=implicit'], [[new \PHPStan\Type\MixedType(\false), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\Constant\ConstantIntegerType(1))], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\NullType()), new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\NullType()])], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\ObjectWithoutClassType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\ObjectWithoutClassType(new \PHPStan\Type\ObjectType('A'))], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ObjectWithoutClassType(new \PHPStan\Type\ObjectType('A'))], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\ObjectType('A')), new \PHPStan\Type\ObjectWithoutClassType(new \PHPStan\Type\ObjectType('A'))], \PHPStan\Type\MixedType::class, 'mixed~A=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\NullType()), new \PHPStan\Type\NullType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IntegerType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\Constant\ConstantIntegerType(1)), new \PHPStan\Type\Constant\ConstantIntegerType(1)], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\ObjectType('Exception')), new \PHPStan\Type\ObjectType('Throwable')], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\ObjectType('Exception')), new \PHPStan\Type\ObjectType('Exception')], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\ObjectType('Exception')), new \PHPStan\Type\ObjectType('InvalidArgumentException')], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\NullType(), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\NullType())], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\NullType())], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType('DateTime')], \PHPStan\Type\UnionType::class, 'DateTime|T (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType('DateTime')], \PHPStan\Type\ObjectType::class, 'DateTime'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\Generic\TemplateType::class, 'T of DateTime (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'U', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\UnionType::class, 'T of DateTime (function a(), parameter)|U of DateTime (function a(), parameter)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\IntegerType()], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\StringType()], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType(), new \PHPStan\Type\FloatType()], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType(), new \PHPStan\Type\FloatType()])], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\Constant\ConstantIntegerType(2)])], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\Constant\ConstantIntegerType(2), new \PHPStan\Type\FloatType()])], \PHPStan\Type\UnionType::class, 'float|int|string'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\Constant\ConstantStringType(\stdClass::class)], \PHPStan\Type\ClassStringType::class, 'class-string'], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\Constant\ConstantStringType('Nonexistent')], \PHPStan\Type\UnionType::class, '\'Nonexistent\'|class-string'], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\IntegerType()], \PHPStan\Type\UnionType::class, 'class-string|int'], [[new \PHPStan\Type\Constant\ConstantStringType(\Exception::class), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\ClassStringType::class, 'class-string'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\StringType()], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Throwable::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Throwable>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\InvalidArgumentException::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\stdClass::class))], \PHPStan\Type\UnionType::class, 'class-string<Exception>|class-string<stdClass>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Throwable::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Throwable>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\InvalidArgumentException::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\UnionType::class, '\'Exception\'|class-string<InvalidArgumentException>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Constant\ConstantStringType(\stdClass::class)], \PHPStan\Type\UnionType::class, '\'stdClass\'|class-string<Exception>'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\CallableType()])], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\CallableType()]), new \PHPStan\Type\Constant\ConstantStringType('test_function')], \PHPStan\Type\UnionType::class, '\'test_function\'|(callable(): mixed&string)'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\CallableType()]), new \PHPStan\Type\IntegerType()], \PHPStan\Type\UnionType::class, '(callable(): mixed&string)|int'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), \PHPStan\Type\IntegerRangeType::fromInterval(2, 5)], \PHPStan\Type\IntegerRangeType::class, 'int<1, 5>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 2), \PHPStan\Type\IntegerRangeType::fromInterval(3, 5)], \PHPStan\Type\IntegerRangeType::class, 'int<1, 5>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), \PHPStan\Type\IntegerRangeType::fromInterval(7, 9)], \PHPStan\Type\UnionType::class, 'int<1, 3>|int<7, 9>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(7, 9), \PHPStan\Type\IntegerRangeType::fromInterval(1, 3)], \PHPStan\Type\UnionType::class, 'int<1, 3>|int<7, 9>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\Constant\ConstantIntegerType(3)], \PHPStan\Type\IntegerRangeType::class, 'int<1, 3>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\Constant\ConstantIntegerType(4)], \PHPStan\Type\IntegerRangeType::class, 'int<1, 4>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\Constant\ConstantIntegerType(5)], \PHPStan\Type\UnionType::class, '5|int<1, 3>'], [[new \PHPStan\Type\UnionType([\PHPStan\Type\IntegerRangeType::fromInterval(null, 1), \PHPStan\Type\IntegerRangeType::fromInterval(3, null)]), new \PHPStan\Type\Constant\ConstantIntegerType(2)], \PHPStan\Type\IntegerType::class, 'int'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType(\true)], \PHPStan\Type\MixedType::class, 'mixed=explicit'], [[new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Invariant::class, [new \PHPStan\Type\ObjectType(\DateTimeInterface::class)]), new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Invariant::class, [new \PHPStan\Type\ObjectType(\DateTimeInterface::class)])], \PHPStan\Type\Generic\GenericObjectType::class, 'PHPStan\\Type\\Variance\\Invariant<DateTimeInterface>'], [[new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Invariant::class, [new \PHPStan\Type\ObjectType(\DateTimeInterface::class)]), new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Invariant::class, [new \PHPStan\Type\ObjectType(\DateTime::class)])], \PHPStan\Type\UnionType::class, 'PHPStan\\Type\\Variance\\Invariant<DateTime>|PHPStan\\Type\\Variance\\Invariant<DateTimeInterface>'], [[new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Covariant::class, [new \PHPStan\Type\ObjectType(\DateTimeInterface::class)]), new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Covariant::class, [new \PHPStan\Type\ObjectType(\DateTime::class)])], \PHPStan\Type\Generic\GenericObjectType::class, 'PHPStan\\Type\\Variance\\Covariant<DateTimeInterface>'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectWithoutClassType()], \PHPStan\Type\ObjectWithoutClassType::class, 'object'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType(\stdClass::class)], \PHPStan\Type\UnionType::class, 'stdClass|T of object (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\MixedType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'K', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\UnionType::class, 'K (function a(), parameter)|T (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'K', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\UnionType::class, 'K of object (function a(), parameter)|T of object (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType(\Exception::class), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'K', new \PHPStan\Type\ObjectType(\stdClass::class), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\UnionType::class, 'K of stdClass (function a(), parameter)|T of Exception (function a(), parameter)'], [[new \PHPStan\Type\ObjectType(\DateTimeImmutable::class), new \PHPStan\Type\ObjectType(\DateTimeInterface::class, new \PHPStan\Type\ObjectType(\DateTimeImmutable::class))], \PHPStan\Type\ObjectType::class, \DateTimeInterface::class], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType())], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()])], \PHPStan\Type\UnionType::class, 'array()|array(string)'], [[new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()], 1, [0])], \PHPStan\Type\UnionType::class, 'array()|array(?0 => string)'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a'), new \PHPStan\Type\Constant\ConstantStringType('b')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('c'), new \PHPStan\Type\Constant\ConstantStringType('d')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()])], \PHPStan\Type\UnionType::class, 'array(\'a\' => int, \'b\' => int)|array(\'c\' => int, \'d\' => int)'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a')], [new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a'), new \PHPStan\Type\Constant\ConstantStringType('b')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()])], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'a\' => int, ?\'b\' => int)'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a'), new \PHPStan\Type\Constant\ConstantStringType('b')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('b'), new \PHPStan\Type\Constant\ConstantStringType('c')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()])], \PHPStan\Type\UnionType::class, 'array(\'a\' => int, \'b\' => int)|array(\'b\' => int, \'c\' => int)'], [[\PHPStan\Type\TypeCombinator::intersect(new \PHPStan\Type\StringType(), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\IntegerType())), \PHPStan\Type\TypeCombinator::intersect(new \PHPStan\Type\StringType(), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\IntegerType()))], \PHPStan\Type\IntersectionType::class, 'string&hasOffset(int)'], [[\PHPStan\Type\TypeCombinator::intersect(new \PHPStan\Type\Constant\ConstantStringType('abc'), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\IntegerType())), \PHPStan\Type\TypeCombinator::intersect(new \PHPStan\Type\Constant\ConstantStringType('abc'), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\IntegerType()))], \PHPStan\Type\IntersectionType::class, '\'abc\'&hasOffset(int)'], [[\PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\StaticTypeFactory::falsey()], \PHPStan\Type\UnionType::class, '0|0.0|\'\'|\'0\'|array()|false|null'], [[\PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\StaticTypeFactory::truthy()], \PHPStan\Type\MixedType::class, 'mixed~0|0.0|\'\'|\'0\'|array()|false|null=implicit'], [[\PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\StaticTypeFactory::truthy()], \PHPStan\Type\MixedType::class, 'mixed=implicit']];
    }
    /**
     * @dataProvider dataUnion
     * @param \PHPStan\Type\Type[] $types
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testUnion(array $types, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $actualType = \PHPStan\Type\TypeCombinator::union(...$types);
        $actualTypeDescription = $actualType->describe(\PHPStan\Type\VerbosityLevel::precise());
        if ($actualType instanceof \PHPStan\Type\MixedType) {
            if ($actualType->isExplicitMixed()) {
                $actualTypeDescription .= '=explicit';
            } else {
                $actualTypeDescription .= '=implicit';
            }
        }
        $this->assertSame($expectedTypeDescription, $actualTypeDescription, \sprintf('union(%s)', \implode(', ', \array_map(static function (\PHPStan\Type\Type $type) : string {
            return $type->describe(\PHPStan\Type\VerbosityLevel::precise());
        }, $types))));
        $this->assertInstanceOf($expectedTypeClass, $actualType);
        $hasSubtraction = \false;
        foreach ($types as $type) {
            if (!$type instanceof \PHPStan\Type\SubtractableType || $type->getSubtractedType() === null) {
                continue;
            }
            $hasSubtraction = \true;
        }
        if ($hasSubtraction) {
            return;
        }
    }
    /**
     * @dataProvider dataUnion
     * @param \PHPStan\Type\Type[] $types
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testUnionInversed(array $types, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $types = \array_reverse($types);
        $actualType = \PHPStan\Type\TypeCombinator::union(...$types);
        $actualTypeDescription = $actualType->describe(\PHPStan\Type\VerbosityLevel::precise());
        if ($actualType instanceof \PHPStan\Type\MixedType) {
            if ($actualType->isExplicitMixed()) {
                $actualTypeDescription .= '=explicit';
            } else {
                $actualTypeDescription .= '=implicit';
            }
        }
        $this->assertSame($expectedTypeDescription, $actualTypeDescription, \sprintf('union(%s)', \implode(', ', \array_map(static function (\PHPStan\Type\Type $type) : string {
            return $type->describe(\PHPStan\Type\VerbosityLevel::precise());
        }, $types))));
        $this->assertInstanceOf($expectedTypeClass, $actualType);
    }
    public function dataIntersect() : array
    {
        return [[[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('ArrayObject')], \PHPStan\Type\IntersectionType::class, 'ArrayObject&iterable<string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\StringType()), new \PHPStan\Type\ObjectType('Iterator')], \PHPStan\Type\IntersectionType::class, 'iterable<string>&Iterator'], [[new \PHPStan\Type\ObjectType('Iterator'), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(\true), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('_'), 'T', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()))], \PHPStan\Type\IntersectionType::class, 'iterable<T (function _(), parameter)>&Iterator'], [[new \PHPStan\Type\ObjectType('Foo'), new \PHPStan\Type\StaticType('Foo')], \PHPStan\Type\StaticType::class, 'static(Foo)'], [[new \PHPStan\Type\VoidType(), new \PHPStan\Type\MixedType()], \PHPStan\Type\VoidType::class, 'void'], [[new \PHPStan\Type\ObjectType('UnknownClass'), new \PHPStan\Type\ObjectType('UnknownClass')], \PHPStan\Type\ObjectType::class, 'UnknownClass'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType('UnknownClassA'), new \PHPStan\Type\ObjectType('UnknownClassB')]), new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType('UnknownClassA'), new \PHPStan\Type\ObjectType('UnknownClassB')])], \PHPStan\Type\UnionType::class, 'UnknownClassA|UnknownClassB'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\BooleanType()], \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [[new \PHPStan\Type\Constant\ConstantBooleanType(\false), new \PHPStan\Type\BooleanType()], \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [[\PHPStan\Type\StaticTypeFactory::truthy(), new \PHPStan\Type\BooleanType()], \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [[\PHPStan\Type\StaticTypeFactory::falsey(), new \PHPStan\Type\BooleanType()], \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [[\PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\StaticTypeFactory::truthy()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\NeverType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ObjectType('Iterator'), new \PHPStan\Type\ObjectType('Countable'), new \PHPStan\Type\ObjectType('Traversable')], \PHPStan\Type\IntersectionType::class, 'Countable&Iterator'], [[new \PHPStan\Type\ObjectType('Iterator'), new \PHPStan\Type\ObjectType('Traversable'), new \PHPStan\Type\ObjectType('Countable')], \PHPStan\Type\IntersectionType::class, 'Countable&Iterator'], [[new \PHPStan\Type\ObjectType('Traversable'), new \PHPStan\Type\ObjectType('Iterator'), new \PHPStan\Type\ObjectType('Countable')], \PHPStan\Type\IntersectionType::class, 'Countable&Iterator'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable<string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<int, string>'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\StringType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\ArrayType::class, 'array<int, string>'], [[new \PHPStan\Type\IterableType(new \PHPStan\Type\IntegerType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType())], \PHPStan\Type\IterableType::class, 'iterable<int, string>'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\IterableType::class, 'iterable'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\IntegerType::class, 'int'], [[new \PHPStan\Type\Constant\ConstantIntegerType(1), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\Constant\ConstantIntegerType::class, '1'], [[new \PHPStan\Type\Constant\ConstantStringType('foo'), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\Constant\ConstantStringType::class, '\'foo\''], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\StringType::class, 'string'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()])], \PHPStan\Type\UnionType::class, 'int|string'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\Foo::class), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\IntersectionType::class, 'Test\\Foo&hasMethod(__toString)'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\ClassWithToString::class), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\ObjectType::class, '_PhpScoper26e51eeacccf\\Test\\ClassWithToString'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\CheckTypeFunctionCall\FinalClassWithMethodExists::class), new \PHPStan\Type\Accessory\HasMethodType('doBar')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\IntersectionType::class, 'object&hasMethod(__toString)'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasMethodType('__toString')]), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\IntersectionType::class, 'object&hasMethod(__toString)'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasMethodType('foo')]), new \PHPStan\Type\Accessory\HasMethodType('bar')], \PHPStan\Type\IntersectionType::class, 'object&hasMethod(bar)&hasMethod(foo)'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\Foo::class), new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\FirstInterface::class)]), new \PHPStan\Type\Accessory\HasMethodType('__toString')], \PHPStan\Type\UnionType::class, '(Test\\FirstInterface&hasMethod(__toString))|(Test\\Foo&hasMethod(__toString))'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\Foo::class), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')], \PHPStan\Type\IntersectionType::class, 'Test\\Foo&hasProperty(fooProperty)'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\ClassWithNullableProperty::class), new \PHPStan\Type\Accessory\HasPropertyType('foo')], \PHPStan\Type\ObjectType::class, '_PhpScoper26e51eeacccf\\Test\\ClassWithNullableProperty'], [[new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\CheckTypeFunctionCall\FinalClassWithPropertyExists::class), new \PHPStan\Type\Accessory\HasPropertyType('barProperty')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')], \PHPStan\Type\IntersectionType::class, 'object&hasProperty(fooProperty)'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')]), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')], \PHPStan\Type\IntersectionType::class, 'object&hasProperty(fooProperty)'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ObjectWithoutClassType(), new \PHPStan\Type\Accessory\HasPropertyType('foo')]), new \PHPStan\Type\Accessory\HasPropertyType('bar')], \PHPStan\Type\IntersectionType::class, 'object&hasProperty(bar)&hasProperty(foo)'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\Foo::class), new \PHPStan\Type\ObjectType(\_PhpScoper26e51eeacccf\Test\FirstInterface::class)]), new \PHPStan\Type\Accessory\HasPropertyType('fooProperty')], \PHPStan\Type\UnionType::class, '(Test\\FirstInterface&hasProperty(fooProperty))|(Test\\Foo&hasProperty(fooProperty))'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\IntersectionType::class, 'array<string, string>&hasOffset(\'a\')'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a')), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\IntersectionType::class, 'array<string, string>&hasOffset(\'a\')'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType())], \PHPStan\Type\IntersectionType::class, 'array<string, string>&hasOffset(string)'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType())], \PHPStan\Type\IntersectionType::class, 'array&hasOffset(string)'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a')], [new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'a\' => \'foo\')'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a')], [new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('b'))], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\NeverType::class, '*NEVER*'], [[\PHPStan\Type\TypeCombinator::union(new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a')], [new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('b')], [new \PHPStan\Type\Constant\ConstantStringType('foo')])), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('b'))], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'b\' => \'foo\')'], [[\PHPStan\Type\TypeCombinator::union(new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a')], [new \PHPStan\Type\Constant\ConstantStringType('foo')]), new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false)), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'a\' => \'foo\')'], [[new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false), new \PHPStan\Type\ObjectType(\Closure::class)], \PHPStan\Type\ClosureType::class, 'Closure(): mixed'], [[new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false), new \PHPStan\Type\CallableType()], \PHPStan\Type\ClosureType::class, 'Closure(): mixed'], [[new \PHPStan\Type\ClosureType([], new \PHPStan\Type\MixedType(), \false), new \PHPStan\Type\ObjectWithoutClassType()], \PHPStan\Type\ClosureType::class, 'Closure(): mixed'], [[new \PHPStan\Type\UnionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\NullType()]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\StringType())], \PHPStan\Type\IntersectionType::class, 'array<string>&hasOffset(string)'], [[new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\NonEmptyArrayType()], \PHPStan\Type\IntersectionType::class, 'array&nonEmpty'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\Accessory\NonEmptyArrayType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\NonEmptyArrayType()]), new \PHPStan\Type\Accessory\NonEmptyArrayType()], \PHPStan\Type\IntersectionType::class, 'array&nonEmpty'], [[\PHPStan\Type\TypeCombinator::union(new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()])), new \PHPStan\Type\Accessory\NonEmptyArrayType()], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(string)'], [[new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Accessory\NonEmptyArrayType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo'))]), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('bar'))])], \PHPStan\Type\IntersectionType::class, 'array&hasOffset(\'bar\')&hasOffset(\'foo\')'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\StringType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\Constant\ConstantStringType('foo')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\Constant\ConstantIntegerType(1)], \PHPStan\Type\Constant\ConstantIntegerType::class, '1'], [[new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType())], \PHPStan\Type\MixedType::class, 'mixed~int|string=implicit'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType('DateTime')], \PHPStan\Type\IntersectionType::class, 'DateTime&T (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType('DateTime')], \PHPStan\Type\Generic\TemplateObjectType::class, 'T of DateTime (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\Generic\TemplateType::class, 'T of DateTime (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), \PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'U', new \PHPStan\Type\ObjectType('DateTime'), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant())], \PHPStan\Type\IntersectionType::class, 'T of DateTime (function a(), parameter)&U of DateTime (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', null, \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\MixedType()], \PHPStan\Type\Generic\TemplateType::class, 'T (function a(), parameter)=explicit'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\ClassStringType::class, 'class-string'], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\Constant\ConstantStringType(\stdClass::class)], \PHPStan\Type\Constant\ConstantStringType::class, '\'stdClass\''], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\Constant\ConstantStringType('Nonexistent')], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\ClassStringType(), new \PHPStan\Type\IntegerType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\Constant\ConstantStringType(\Exception::class), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class))], \PHPStan\Type\Constant\ConstantStringType::class, '\'Exception\''], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\StringType()], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Throwable::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<Exception>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\InvalidArgumentException::class))], \PHPStan\Type\Generic\GenericClassStringType::class, 'class-string<InvalidArgumentException>'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\stdClass::class))], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\Constant\ConstantStringType::class, '\'Exception\''], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Throwable::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\Constant\ConstantStringType::class, '\'Exception\''], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\InvalidArgumentException::class)), new \PHPStan\Type\Constant\ConstantStringType(\Exception::class)], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\Generic\GenericClassStringType(new \PHPStan\Type\ObjectType(\Exception::class)), new \PHPStan\Type\Constant\ConstantStringType(\stdClass::class)], \PHPStan\Type\NeverType::class, '*NEVER*'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), \PHPStan\Type\IntegerRangeType::fromInterval(2, 5)], \PHPStan\Type\IntegerRangeType::class, 'int<2, 3>'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), \PHPStan\Type\IntegerRangeType::fromInterval(3, 5)], \PHPStan\Type\Constant\ConstantIntegerType::class, '3'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), \PHPStan\Type\IntegerRangeType::fromInterval(7, 9)], \PHPStan\Type\NeverType::class, '*NEVER*'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\Constant\ConstantIntegerType(3)], \PHPStan\Type\Constant\ConstantIntegerType::class, '3'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\Constant\ConstantIntegerType(4)], \PHPStan\Type\NeverType::class, '*NEVER*'], [[\PHPStan\Type\IntegerRangeType::fromInterval(1, 3), new \PHPStan\Type\IntegerType()], \PHPStan\Type\IntegerRangeType::class, 'int<1, 3>'], [[new \PHPStan\Type\ObjectType(\Traversable::class), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\ObjectType::class, 'Traversable'], [[new \PHPStan\Type\ObjectType(\Traversable::class), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType())], \PHPStan\Type\ObjectType::class, 'Traversable'], [[new \PHPStan\Type\ObjectType(\Traversable::class), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType(\true))], \PHPStan\Type\IntersectionType::class, 'iterable&Traversable'], [[new \PHPStan\Type\ObjectType(\Traversable::class), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType())], \PHPStan\Type\IntersectionType::class, 'iterable&Traversable'], [[new \PHPStan\Type\ObjectType(\Traversable::class), new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType(\true))], \PHPStan\Type\IntersectionType::class, 'iterable&Traversable'], [[new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()], \PHPStan\Type\MixedType::class, 'mixed=implicit'], [[new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType()], \PHPStan\Type\MixedType::class, 'mixed=explicit'], [[new \PHPStan\Type\MixedType(\true), new \PHPStan\Type\MixedType(\true)], \PHPStan\Type\MixedType::class, 'mixed=explicit'], [[new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Covariant::class, [new \PHPStan\Type\ObjectType(\DateTimeInterface::class)]), new \PHPStan\Type\Generic\GenericObjectType(\PHPStan\Type\Variance\Covariant::class, [new \PHPStan\Type\ObjectType(\DateTime::class)])], \PHPStan\Type\Generic\GenericObjectType::class, 'PHPStan\\Type\\Variance\\Covariant<DateTime>'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectWithoutClassType()], \PHPStan\Type\Generic\TemplateObjectWithoutClassType::class, 'T of object (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\ObjectType(\stdClass::class)], \PHPStan\Type\IntersectionType::class, 'stdClass&T of object (function a(), parameter)'], [[\PHPStan\Type\Generic\TemplateTypeFactory::create(\PHPStan\Type\Generic\TemplateTypeScope::createWithFunction('a'), 'T', new \PHPStan\Type\ObjectWithoutClassType(), \PHPStan\Type\Generic\TemplateTypeVariance::createInvariant()), new \PHPStan\Type\MixedType()], \PHPStan\Type\Generic\TemplateObjectWithoutClassType::class, 'T of object (function a(), parameter)'], [[new \PHPStan\Type\Constant\ConstantStringType('NonexistentClass'), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\Constant\ConstantStringType(\stdClass::class), new \PHPStan\Type\ClassStringType()], \PHPStan\Type\Constant\ConstantStringType::class, '\'stdClass\''], [[new \PHPStan\Type\ObjectType(\DateTimeInterface::class), new \PHPStan\Type\ObjectType(\Iterator::class)], \PHPStan\Type\IntersectionType::class, 'DateTimeInterface&Iterator'], [[new \PHPStan\Type\ObjectType(\DateTimeInterface::class), new \PHPStan\Type\Generic\GenericObjectType(\Iterator::class, [new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()])], \PHPStan\Type\IntersectionType::class, 'DateTimeInterface&Iterator<mixed, mixed>'], [[new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantStringType('a'), new \PHPStan\Type\Constant\ConstantStringType('b')], [new \PHPStan\Type\IntegerType(), new \PHPStan\Type\IntegerType()], 2, [0]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('a'))], \PHPStan\Type\Constant\ConstantArrayType::class, 'array(\'a\' => int, \'b\' => int)'], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\IntegerType())], \PHPStan\Type\IntersectionType::class, 'string&hasOffset(int)'], [[new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\MixedType()], \PHPStan\Type\BenevolentUnionType::class, '(int|string)'], [[new \PHPStan\Type\Constant\ConstantStringType('abc'), new \PHPStan\Type\Accessory\AccessoryNumericStringType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\Constant\ConstantStringType('123'), new \PHPStan\Type\Accessory\AccessoryNumericStringType()], \PHPStan\Type\Constant\ConstantStringType::class, '\'123\''], [[new \PHPStan\Type\StringType(), new \PHPStan\Type\Accessory\AccessoryNumericStringType()], \PHPStan\Type\IntersectionType::class, 'string&numeric'], [[new \PHPStan\Type\IntegerType(), new \PHPStan\Type\Accessory\AccessoryNumericStringType()], \PHPStan\Type\NeverType::class, '*NEVER*'], [[new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\Accessory\NonEmptyArrayType()]), new \PHPStan\Type\NeverType()], \PHPStan\Type\NeverType::class, '*NEVER*']];
    }
    /**
     * @dataProvider dataIntersect
     * @param \PHPStan\Type\Type[] $types
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testIntersect(array $types, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $actualType = \PHPStan\Type\TypeCombinator::intersect(...$types);
        $actualTypeDescription = $actualType->describe(\PHPStan\Type\VerbosityLevel::precise());
        if ($actualType instanceof \PHPStan\Type\MixedType) {
            if ($actualType->isExplicitMixed()) {
                $actualTypeDescription .= '=explicit';
            } else {
                $actualTypeDescription .= '=implicit';
            }
        }
        $this->assertSame($expectedTypeDescription, $actualTypeDescription);
        $this->assertInstanceOf($expectedTypeClass, $actualType);
    }
    /**
     * @dataProvider dataIntersect
     * @param \PHPStan\Type\Type[] $types
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testIntersectInversed(array $types, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $actualType = \PHPStan\Type\TypeCombinator::intersect(...\array_reverse($types));
        $actualTypeDescription = $actualType->describe(\PHPStan\Type\VerbosityLevel::precise());
        if ($actualType instanceof \PHPStan\Type\MixedType) {
            if ($actualType->isExplicitMixed()) {
                $actualTypeDescription .= '=explicit';
            } else {
                $actualTypeDescription .= '=implicit';
            }
        }
        $this->assertSame($expectedTypeDescription, $actualTypeDescription);
        $this->assertInstanceOf($expectedTypeClass, $actualType);
    }
    public function dataRemove() : array
    {
        return [[new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\Constant\ConstantBooleanType(\true), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\Constant\ConstantBooleanType(\true)]), new \PHPStan\Type\Constant\ConstantBooleanType(\true), \PHPStan\Type\IntegerType::class, 'int'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType('Foo'), new \PHPStan\Type\ObjectType('Bar')]), new \PHPStan\Type\ObjectType('Foo'), \PHPStan\Type\ObjectType::class, 'Bar'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\ObjectType('Foo'), new \PHPStan\Type\ObjectType('Bar'), new \PHPStan\Type\ObjectType('Baz')]), new \PHPStan\Type\ObjectType('Foo'), \PHPStan\Type\UnionType::class, 'Bar|Baz'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\StringType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), new \PHPStan\Type\ObjectType('ArrayObject')]), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType()), \PHPStan\Type\UnionType::class, 'array<string>|ArrayObject'], [new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\Constant\ConstantBooleanType(\false), \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [new \PHPStan\Type\Constant\ConstantBooleanType(\false), new \PHPStan\Type\Constant\ConstantBooleanType(\true), \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\BooleanType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\Constant\ConstantBooleanType(\false), new \PHPStan\Type\BooleanType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\BooleanType(), new \PHPStan\Type\Constant\ConstantBooleanType(\true), \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [new \PHPStan\Type\BooleanType(), new \PHPStan\Type\Constant\ConstantBooleanType(\false), \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [new \PHPStan\Type\BooleanType(), new \PHPStan\Type\BooleanType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\MixedType::class, 'mixed~0|0.0|\'\'|\'0\'|array()|false|null'], [\PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\UnionType::class, '0|0.0|\'\'|\'0\'|array()|false|null'], [new \PHPStan\Type\BooleanType(), \PHPStan\Type\StaticTypeFactory::falsey(), \PHPStan\Type\Constant\ConstantBooleanType::class, 'true'], [new \PHPStan\Type\BooleanType(), \PHPStan\Type\StaticTypeFactory::truthy(), \PHPStan\Type\Constant\ConstantBooleanType::class, 'false'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantBooleanType(\true), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\BooleanType(), \PHPStan\Type\IntegerType::class, 'int'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\Constant\ConstantBooleanType(\false), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\BooleanType(), \PHPStan\Type\IntegerType::class, 'int'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\BooleanType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantBooleanType(\true), \PHPStan\Type\UnionType::class, 'int|false'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\BooleanType(), new \PHPStan\Type\IntegerType()]), new \PHPStan\Type\Constant\ConstantBooleanType(\false), \PHPStan\Type\UnionType::class, 'int|true'], [new \PHPStan\Type\UnionType([new \PHPStan\Type\StringType(), new \PHPStan\Type\IntegerType(), new \PHPStan\Type\NullType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\NullType(), new \PHPStan\Type\StringType()]), \PHPStan\Type\IntegerType::class, 'int'], [new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), \PHPStan\Type\ObjectType::class, 'Traversable'], [new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ObjectType(\Traversable::class), \PHPStan\Type\ArrayType::class, 'array'], [new \PHPStan\Type\IterableType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\ObjectType(\Iterator::class), \PHPStan\Type\IterableType::class, 'iterable'], [new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\StringType(), \PHPStan\Type\IntegerType::class, 'int'], [new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\IntegerType(), \PHPStan\Type\StringType::class, 'string'], [new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\Constant\ConstantStringType('foo'), \PHPStan\Type\UnionType::class, 'int|string'], [new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\Constant\ConstantIntegerType(1), \PHPStan\Type\UnionType::class, 'int<min, 0>|int<2, max>|string'], [new \PHPStan\Type\BenevolentUnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), new \PHPStan\Type\UnionType([new \PHPStan\Type\IntegerType(), new \PHPStan\Type\StringType()]), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Constant\ConstantArrayType([], []), \PHPStan\Type\IntersectionType::class, 'array&nonEmpty'], [\PHPStan\Type\TypeCombinator::union(new \PHPStan\Type\Constant\ConstantArrayType([], []), new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0)], [new \PHPStan\Type\StringType()])), new \PHPStan\Type\Constant\ConstantArrayType([], []), \PHPStan\Type\Constant\ConstantArrayType::class, 'array(string)'], [new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\NonEmptyArrayType()]), new \PHPStan\Type\Accessory\NonEmptyArrayType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\NonEmptyArrayType(), \PHPStan\Type\Constant\ConstantArrayType::class, 'array()'], [new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\IntersectionType([new \PHPStan\Type\ArrayType(new \PHPStan\Type\MixedType(), new \PHPStan\Type\MixedType()), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantStringType('foo'))]), \PHPStan\Type\ArrayType::class, 'array'], [new \PHPStan\Type\MixedType(), new \PHPStan\Type\IntegerType(), \PHPStan\Type\MixedType::class, 'mixed~int'], [new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\IntegerType(), \PHPStan\Type\MixedType::class, 'mixed~int'], [new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\IntegerType()), new \PHPStan\Type\StringType(), \PHPStan\Type\MixedType::class, 'mixed~int|string'], [new \PHPStan\Type\MixedType(\false), new \PHPStan\Type\MixedType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\MixedType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\MixedType(\false), new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), \PHPStan\Type\StringType::class, 'string'], [new \PHPStan\Type\MixedType(\false, new \PHPStan\Type\StringType()), new \PHPStan\Type\NeverType(), \PHPStan\Type\MixedType::class, 'mixed~string'], [new \PHPStan\Type\ObjectType('Exception'), new \PHPStan\Type\ObjectType('InvalidArgumentException'), \PHPStan\Type\ObjectType::class, 'Exception~InvalidArgumentException'], [new \PHPStan\Type\ObjectType('Exception', new \PHPStan\Type\ObjectType('InvalidArgumentException')), new \PHPStan\Type\ObjectType('LengthException'), \PHPStan\Type\ObjectType::class, 'Exception~InvalidArgumentException|LengthException'], [new \PHPStan\Type\ObjectType('Exception'), new \PHPStan\Type\ObjectType('Throwable'), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\ObjectType('Exception', new \PHPStan\Type\ObjectType('InvalidArgumentException')), new \PHPStan\Type\ObjectType('InvalidArgumentException'), \PHPStan\Type\ObjectType::class, 'Exception~InvalidArgumentException'], [\PHPStan\Type\IntegerRangeType::fromInterval(3, 7), \PHPStan\Type\IntegerRangeType::fromInterval(2, 4), \PHPStan\Type\IntegerRangeType::class, 'int<5, 7>'], [\PHPStan\Type\IntegerRangeType::fromInterval(3, 7), \PHPStan\Type\IntegerRangeType::fromInterval(3, 4), \PHPStan\Type\IntegerRangeType::class, 'int<5, 7>'], [\PHPStan\Type\IntegerRangeType::fromInterval(3, 7), \PHPStan\Type\IntegerRangeType::fromInterval(5, 7), \PHPStan\Type\IntegerRangeType::class, 'int<3, 4>'], [\PHPStan\Type\IntegerRangeType::fromInterval(3, 7), new \PHPStan\Type\Constant\ConstantIntegerType(3), \PHPStan\Type\IntegerRangeType::class, 'int<4, 7>'], [new \PHPStan\Type\IntegerType(), \PHPStan\Type\IntegerRangeType::fromInterval(null, 7), \PHPStan\Type\IntegerRangeType::class, 'int<8, max>'], [\PHPStan\Type\IntegerRangeType::fromInterval(0, 2), \PHPStan\Type\IntegerRangeType::fromInterval(-1, 3), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\IntegerRangeType::fromInterval(0, 2), \PHPStan\Type\IntegerRangeType::fromInterval(0, 3), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\IntegerRangeType::fromInterval(0, 2), \PHPStan\Type\IntegerRangeType::fromInterval(-1, 2), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\IntegerRangeType::fromInterval(0, 2), new \PHPStan\Type\IntegerType(), \PHPStan\Type\NeverType::class, '*NEVER*'], [\PHPStan\Type\IntegerRangeType::fromInterval(null, 1), \PHPStan\Type\IntegerRangeType::fromInterval(4, null), \PHPStan\Type\IntegerRangeType::class, 'int<min, 1>'], [\PHPStan\Type\IntegerRangeType::fromInterval(1, null), \PHPStan\Type\IntegerRangeType::fromInterval(null, -4), \PHPStan\Type\IntegerRangeType::class, 'int<1, max>'], [new \PHPStan\Type\UnionType([\PHPStan\Type\IntegerRangeType::fromInterval(3, null), \PHPStan\Type\IntegerRangeType::fromInterval(null, 1)]), \PHPStan\Type\IntegerRangeType::fromInterval(4, null), \PHPStan\Type\UnionType::class, '3|int<min, 1>'], [new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0), new \PHPStan\Type\Constant\ConstantIntegerType(1)], [new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()], 2), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantIntegerType(1)), \PHPStan\Type\NeverType::class, '*NEVER*'], [new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0), new \PHPStan\Type\Constant\ConstantIntegerType(1)], [new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()], 2, [1]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantIntegerType(1)), \PHPStan\Type\Constant\ConstantArrayType::class, 'array(string)'], [new \PHPStan\Type\Constant\ConstantArrayType([new \PHPStan\Type\Constant\ConstantIntegerType(0), new \PHPStan\Type\Constant\ConstantIntegerType(1)], [new \PHPStan\Type\StringType(), new \PHPStan\Type\StringType()], 2, [1]), new \PHPStan\Type\Accessory\HasOffsetType(new \PHPStan\Type\Constant\ConstantIntegerType(0)), \PHPStan\Type\NeverType::class, '*NEVER*']];
    }
    /**
     * @dataProvider dataRemove
     * @param \PHPStan\Type\Type $fromType
     * @param \PHPStan\Type\Type $type
     * @param class-string<\PHPStan\Type\Type> $expectedTypeClass
     * @param string $expectedTypeDescription
     */
    public function testRemove(\PHPStan\Type\Type $fromType, \PHPStan\Type\Type $type, string $expectedTypeClass, string $expectedTypeDescription) : void
    {
        $result = \PHPStan\Type\TypeCombinator::remove($fromType, $type);
        $this->assertSame($expectedTypeDescription, $result->describe(\PHPStan\Type\VerbosityLevel::precise()));
        $this->assertInstanceOf($expectedTypeClass, $result);
    }
    public function testSpecificUnionConstantArray() : void
    {
        $arrays = [];
        for ($i = 0; $i < 5; $i++) {
            $array = new \PHPStan\Type\Constant\ConstantArrayType([], []);
            for ($j = 0; $j < 5; $j++) {
                $arrays[] = $array = $array->setOffsetValueType(new \PHPStan\Type\Constant\ConstantIntegerType($j), new \PHPStan\Type\StringType());
                if ($i !== $j) {
                    continue;
                }
                $arrays[] = $array = $array->setOffsetValueType(new \PHPStan\Type\Constant\ConstantStringType('test'), new \PHPStan\Type\StringType());
            }
        }
        $resultType = \PHPStan\Type\TypeCombinator::union(...$arrays);
        $this->assertInstanceOf(\PHPStan\Type\Constant\ConstantArrayType::class, $resultType);
        $this->assertSame('array(0 => string, ?\'test\' => string, ?1 => string, ?2 => string, ?3 => string, ?4 => string)', $resultType->describe(\PHPStan\Type\VerbosityLevel::precise()));
    }
}
